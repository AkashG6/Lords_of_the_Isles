
<!DOCTYPE html>
<html>
<head>
	<title>Home</title>
  
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" type="text/css" href="css/home.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <script type="text/javascript">
      $(document).ready(function(){
          $('[data-toggle="popover"]').popover({
              placement : 'bottom',
              trigger : 'hover'
          });
          var text;
          var random_event=1;
          $('[data-toggle="dice"]').popover({
              placement : 'bottom',
              trigger : 'hover',
              html : true,
              content : text
          });
      });
    </script>

    <script type="text/javascript">
         var change_iframe_src = function(new_src) {
             $("#info-screen").attr('src', new_src);
         }

         var change_goods = function(new_src) {
             $("#goods_menu").attr('src', new_src);
         }
    </script>
  <script src = "/socket.io/socket.io.js"></script>
</head>

<body>

	<div class="container-fluid" >
  		<div class="row row-eq-height" >

        <div class="col-md-2" >
          <div class="row">
            <div class="col-md-8" style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Your Gold">
                <img src="assets/bg/gold.png" height="50" style="padding-left: 10px;" >
                <div class="money">
                    <script type="text/javascript">
                        var socket = io();

                        var person = localStorage.getItem("user");
                        console.log("person:" + person);
                        socket.emit("add-user", {"username": person}); // LATER THIS SHOULD BE FROM INDEX.HTML
                        socket.on("setLocalStorage",function(data){
                            localStorage.setItem("i_name", data);
                        });
                        socket.on("wacky_bonus",function(data){
                            // console.log("data "+data);
                            // LOG CODE HERE

                        });
                        setInterval(function(){ 
                            socket.emit('getGold', {"username": person});
                        }, 3000);

                        socket.on('responseGold', function(data){
                            document.getElementById('gold').innerHTML = data;
                        });
                    </script>
                    <div id="gold"></div>
                </div> 
            </div>
            <!-- <div class="col-md-4" style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Go to Bank">
                <img height="45" src="assets/bg/bank.png">
            </div> -->
            <div class="col-md-4" style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Click to view Bonuses">
            <script type="text/javascript">
              function showBonus(){
                window.change_iframe_src('bonus.html');
              }
            </script>
                <img height="40" style="margin-top: 5px;" src="assets/bg/gift.png" onclick="showBonus()">
            </div>
          </div>
          
        </div>
        <div class="col-md-1" style="border: 1px solid grey;">
          <div class="row" style="height: 50px">
            
            <div class="col-md-6 " style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Wiki">
              <a href="wiki.html"><button type="button" class="btn btn-light linksb">W</button></a>
            </div>
            <div class="col-md-6 " style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Forums">
              <button type="button" class="btn btn-light linksb">F</button>
            </div>
          </div>
        </div>
    		<div class="col-md-6" style="border: 1px solid grey" >
      			<center>
      				<img height="50" src="assets/bg/logo.png" style="padding: 5px;" >  
      			</center>
    		</div>
        <div class="col-md-1" style="border: 1px solid grey" >
          <div class="row" style="height: 50px">
            <div class="col-md-12 " style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Help">
              <button type="button" class="btn btn-light linksb">H</button>
            </div>

          </div>
        </div>
        <div class="col-md-2" style="border: 1px solid grey">
            <div class="row">
              <div class="col-md-4 dice" style="border: 1px solid grey; height: 50px" data-container="body" data-toggle="dice" data-placement="bottom" data-content="">
                    <img height="50" src="assets/buttons/dice.png" style="margin-left: -15px; padding: 5px" id="dice_btn">
              </div>
              <div class="col-md-4" style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Time left before next tick">
                  <center>
                    <h5 id="timer"></h5>
                  </center>
              </div>
              <div class="col-md-4" style="border: 1px solid grey" data-container="body" data-toggle="popover" data-placement="bottom" data-content="Current tick">
                  <center>
                    <h5 id="ticks"></h5>
                  </center>
              </div>
            </div>
        </div>
  		</div>
	</div>

 
<!-- ////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////// -->


	<div class="container-fluid">
  		<div class="row " > 
    		<div class="col-md-2 columns" style="border: 1px solid grey;" >
          <center>
            <h5 style=" margin-top: 15%"> Explored Islands</h5>
          </center>
    			<br>
              <center >
                <iframe name="island_menu" height="425 " width="215" src="islands-menu.html" frameborder="0" allowfullscreen ></iframe>
              </center> 
      	</div>
    
    		<div class="col-md-8 col-md-8c" style="border: 1px solid grey; ">
      			<center>
      				<div class="embed-responsive embed-responsive-16by9">
					   <iframe class="embed-responsive-item" id="info-screen" src="islands-info.html" allowfullscreen></iframe>
					</div>
      			</center>
    		</div>
    
    		<div class="col-md-2 columns" style="border: 1px solid grey; background-color: #111111">
    			<h5 style="margin-left: 25%; margin-top: 15% ; color:white"> Leaderboard</h5>
    			<br>
    			<center>
					<iframe height="305" width="210" style="margin-left: 10px" src="rankings.html" frameborder="0" allowfullscreen ></iframe>
            <div id="myRank"></div>
            <div id="myWealth"></div>
            <!-- <div id="myRank"></div> -->
                <script type="text/javascript">
                    setInterval(function(){ 
                      // console.log("updating rank");
                      var person = localStorage.getItem("user");
                      socket.emit('myRank', {"username": person});
                    },5000);
                    socket.on("responseRank",function(data){
                      // console.log("my rank updated"+ data.rank);
                        document.getElementById('myRank').innerHTML = "Your Rank: "+ data.rank;
                        document.getElementById('myWealth').innerHTML = "Your Wealth: "+ data.wealth;
                    });
                </script>
            </center>   
      		</div>
    	</div>
	</div>


<!-- /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
 -->

	<div class="container-fluid three">
  		<div class="row">
    		<div class="col-md-6" style="border: 1px solid grey" >
    			<center>
					<iframe name="ship_menu" height="118" width="100%" src="ships-menu.html" frameborder="0" allowfullscreen ></iframe>
      			</center>   
      		</div>
    
    		<div class="col-md-6" style="border: 1px solid grey">
    			<center>
					<iframe height="118" id="goods_menu" width="100%" src="event-log.html" frameborder="0" allowfullscreen></iframe>
      			</center>   
      		</div>    	
      	</div>
	</div>


  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
    <script src="home.js"></script>
    <script src="island_gen.js"></script>
</body>
</html>